<html>
</head>
<style>
.c {
  color: white;
  float:left;
  min-width: 50px;
  min-height: 50px;
  border: 1px solid #F00000;
  background-color: #F00000;
  padding: 10px;
  margin: 2;
  font-size: 3em;
  text-align: center;
}
</style>
</head>
<body>
<div id="counters">
<div id="c1" class="c"> 0 </div>
<div id="c2" class="c"> 0 </div>
</div>
<div id="plus" class="c"> + </div>
</body>
<script type="text/javascript">
var add = function() {
  var div = document.createElement('div')
  counter(div)
  div.className = "c"
  var container = document.getElementById('counters')
  container.appendChild(div)
}

var counter = function(div) {
  var es = new EventSource('/counter')
  es.addEventListener('count', function(evt) { div.innerHTML = evt.data })
}

var counterId = function(id) {
  var div = document.getElementById(id)
  counter(div)
}

counterId("c1")
counterId("c2")

var plus = document.getElementById("plus")
plus.onclick = add
</script>

</html>
